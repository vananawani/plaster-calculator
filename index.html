<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Plaster Calculator</title>

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: #f7f7fb;
  padding: 24px;
  color: #444;
}

.card {
  max-width: 420px;
  margin: auto;
  background: #ffffff;
  padding: 24px;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.05);
}

h1 { text-align:center; color:#6b6bd6; }

label { display:block; margin-top:12px; font-size:13px; }

input, select {
  width:100%;
  padding:10px;
  margin-top:4px;
  border-radius:12px;
  border:1px solid #e5e7eb;
}

/* ←ここが重要 */
.checkbox-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
}

.checkbox-row input {
  width: auto;
  margin: 0;
}

.hidden { display:none; }

button {
  width:100%;
  margin-top:20px;
  padding:12px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#a5b4fc,#c7d2fe);
}

.result {
  margin-top:20px;
  padding:16px;
  border-radius:16px;
  background:#f1f5ff;
}
</style>
</head>

<body>
<div class="card">
<h1>Plaster Calculator</h1>

<label>形状</label>
<select id="shape" onchange="updateUI()">
  <option value="cylinder">円柱</option>
  <option value="box">直方体</option>
  <option value="cone">円錐</option>
</select>

<label>個数</label>
<input type="number" id="count" value="1">

<label>ロス率 (%)</label>
<input type="number" id="loss" value="10">

<h3>外形サイズ (cm)</h3>

<label>直径 / 幅</label>
<input type="number" id="w">

<div id="depthGroup">
  <label>奥行</label>
  <input type="number" id="d">
</div>

<label>高さ</label>
<input type="number" id="h">

<h3>中空設定</h3>

<!-- ★完全横並び -->
<label class="checkbox-row">
  <input type="checkbox" id="hollow" onchange="updateUI()">
  <span>くり抜き考慮</span>
</label>

<div id="innerGroup">
  <label>内径 / 内幅</label>
  <input type="number" id="iw">

  <div id="innerDepth">
    <label>内奥行</label>
    <input type="number" id="id">
  </div>

  <label>内高さ</label>
  <input type="number" id="ih">
</div>

<h3>材料設定</h3>

<label>石膏比率</label>
<input type="number" id="plaster" value="100">

<label>水比率</label>
<input type="number" id="water" value="70">

<button onclick="calc()">計算する</button>

<div class="result" id="result">ここに計算結果</div>
</div>

<script>
function volume(shape, w, d, h) {
  if (shape === "cylinder") return Math.PI * (w/2)**2 * h;
  if (shape === "box") return w * d * h;
  if (shape === "cone") return Math.PI * (w/2)**2 * h / 3;
  return 0;
}

function updateUI() {
  const shape = shapeEl.value;
  const hollow = hollowEl.checked;

  depthGroup.classList.toggle("hidden", shape !== "box");
  innerDepth.classList.toggle("hidden", shape !== "box");
  innerGroup.classList.toggle("hidden", !hollow);
}

function calc() {
  let vol = volume(shapeEl.value, +wEl.value, +dEl.value, +hEl.value);

  if (hollowEl.checked) {
    vol -= volume(shapeEl.value, +iwEl.value, +idEl.value, +ihEl.value);
  }

  vol *= +countEl.value * (1 + +lossEl.value / 100);

  const total = +plasterEl.value + +waterEl.value;
  const plaster = vol * (+plasterEl.value / total);
  const water = vol * (+waterEl.value / total);

  result.innerHTML =
    `体積：約 ${vol.toFixed(1)} cm³<br>
     石膏：約 ${plaster.toFixed(1)} g<br>
     水：約 ${water.toFixed(1)} g`;
}

const shapeEl = document.getElementById("shape");
const countEl = document.getElementById("count");
const lossEl = document.getElementById("loss");
const wEl = document.getElementById("w");
const dEl = document.getElementById("d");
const hEl = document.getElementById("h");
const hollowEl = document.getElementById("hollow");
const iwEl = document.getElementById("iw");
const idEl = document.getElementById("id");
const ihEl = document.getElementById("ih");
const plasterEl = document.getElementById("plaster");
const waterEl = document.getElementById("water");
const result = document.getElementById("result");

updateUI();
</script>
</body>
</html>